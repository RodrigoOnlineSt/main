<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Portal de Conteúdos</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:700,400&display=swap" rel="stylesheet">
  <style>
    :root {
      --azul1: #1966c4;
      --azul2: #22304C;
      --card-bg: #212f4c;
      --sombra: 0 8px 32px #0e2a4a40;
      --grad: linear-gradient(120deg, var(--azul1) 0%, var(--azul2) 100%);
      --txt-azul: #7dc6ff;
      --white: #fff;
      --glow: 0 0 28px #37a0f7cc;
      --shine: 0 0 60px #22c6fd44, 0 0 0 #fff0;
    }
    html, body {
      margin: 0; padding: 0;
      min-height: 100vh;
      font-family: 'Montserrat', Arial, sans-serif;
      background: var(--grad);
      background-attachment: fixed;
      color: #eaf3fa;
      overflow-x: hidden !important;
      width: 100vw;
      box-sizing: border-box;
    }
    *, *::before, *::after { box-sizing: border-box; max-width: 100vw; }
    /* ... restante do seu CSS ... */
  </style>
</head>
<body>
  <!-- ANIMAÇÃO LOGO 3D SLIDE -->
  <div class="logo-animada-bg" id="logoAnimadaBg">
    <div class="logo-slide-topo" id="logoAnimada">
      <div class="logo-animada-globo3d">
        <span class="globo-reflexo"></span>
        <img class="globo-logo-img" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjNxmA6mH86GQSOc7AKewTETB-55O3iY3QTCytGXS696o25IKkQTU2yQedvgeDo17i_EEYbJoy_eM9t7yN0vpEApNXt19M9Qj8Dh-IIHEi6o3AWTuVZXRtS2rvAT9lY3hAQ4riW3ftOonmBBBTzACHzZJ1pa1EC2joR90I9kH2noEZnCrQTgJOXjVunKjw/s1600/1000123334.png" alt="Logo">
      </div>
    </div>
  </div>
  <!-- PRINCIPAL -->
  <div class="main" id="main">
    <div class="conteudos" id="conteudos"></div>
  </div>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script>
    // FIREBASE (adicione suas credenciais)
    const firebaseConfig = {
      apiKey: "SUA_API_KEY_AQUI",
      authDomain: "concursosuper-29c5b.firebaseapp.com",
      projectId: "concursosuper-29c5b",
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const conteudosDiv = document.getElementById('conteudos');
    const logoAnimadaBg = document.getElementById('logoAnimadaBg');
    const logoAnimada = document.getElementById('logoAnimada');

    // Animação: Logo globo 3D sobe pro topo e some
    window.addEventListener('DOMContentLoaded', function () {
      setTimeout(() => {
        logoAnimada.classList.add('to-header');
        setTimeout(() => {
          logoAnimadaBg.classList.add('hide');
          setTimeout(()=>{
            logoAnimadaBg.style.display = "none";
          }, 800);
        }, 1200);
      }, 900);

      setTimeout(() => {
        conteudosDiv.classList.add('revela');
      }, 1500);
    });

    function mostrarConteudos(){
      db.collection("conteudos").orderBy("data","desc").onSnapshot(snapshot=>{
        conteudosDiv.innerHTML = "";
        snapshot.forEach(doc=>{
          const d = doc.data();
          let btn = document.createElement('button');
          btn.className = 'card-btn';
          btn.onclick = ()=>window.location.search = '?id='+doc.id;
          let capa = d.capa || (d.fotos && d.fotos[0]) || "";
          btn.innerHTML = `
            ${capa ? `<img class="card-capa" src="${capa}">` : `<div class="card-capa" style="background:#2e345c"></div>`}
            <div class="card-titulo">${d.titulo||""}</div>
          `;
          conteudosDiv.appendChild(btn);
        });
      });
    }

    // INSERE CSS GLOBAL NO HTML DE TERCEIROS (para responsividade forçada)
    function cssResponsivoHtmlTerceiros() {
      return `
      <style>
      html, body {
        margin:0; padding:0;
        overflow-x: hidden !important;
        width:100vw; box-sizing:border-box;
        background: #181c24 !important;
      }
      *, *:before, *:after { box-sizing: border-box; max-width: 100vw !important; }
      img, video, iframe, object, embed {
        max-width: 100vw !important;
        height: auto !important;
        display: block;
        margin-left: auto;
        margin-right: auto;
      }
      table { width: 100% !important; max-width: 100vw; word-break: break-word; }
      td, th { word-break: break-word; }
      pre, code { white-space: pre-wrap; word-break: break-all;}
      .container, .content, .main, .wrapper { max-width:100vw !important; width:100vw !important; }
      </style>
      <script>
        // Força ajuste em imagens e vídeos dinâmicos
        setTimeout(function(){
          document.querySelectorAll('img,video,iframe,object,embed').forEach(e=>{
            e.style.maxWidth='100vw';
            e.style.height='auto';
          });
        },500);
      <\/script>
      `;
    }

    function mostrarConteudo(id){
      db.collection("conteudos").doc(id).get().then(doc=>{
        if(!doc.exists){
          document.body.innerHTML = "<div style='color:red;text-align:center;margin:40px 0'>Conteúdo não encontrado</div>";
          return;
        }
        const d = doc.data();
        let htmlPublicado = d.html||"";
        // ADICIONA CSS RESPONSIVO antes do conteúdo original
        let htmlFinal = cssResponsivoHtmlTerceiros() + htmlPublicado;
        document.open();
        document.write(htmlFinal);
        document.close();
      });
    }

    function checarPagina(){
      const id = (new URL(location.href)).searchParams.get("id");
      if(id){
        mostrarConteudo(id);
      } else {
        mostrarConteudos();
      }
    }
    window.onpopstate = checarPagina;
    checarPagina();
  </script>
</body>
</html>
